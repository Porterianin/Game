# -*- coding: utf-8 -*-
# Сценарий вводит основу сюжета и системы песочницы.

# Определяем персонажей.
define k = Character("Катя", color="#ffd166")
define n = Character("", kind=narrator)
define m = Character("Марина", color="#66c2ff")

# Стартовые характеристики героини.
default katya_stats = {
    "здоровье": 80,
    "энергия": 100,
    "знания": 10,
    "харизма": 12,
}

# Деньги, отношения и карта.
default katya_money = 500  # стартовый бюджет, который нужно тратить с умом.

default relations = {
    "Марина": 5,   # соседка по общежитию, помогает освоиться.
}

default current_location = "Общежитие"

default known_locations = [
    "Общежитие",
    "Институт",
    "Библиотека",
    "Центр города",
    "Районная больница",
]

label start:
    scene black
    n "Лето. Деревня провожает Катю, когда автобус увозит её в большой город."
    n "Впереди медицинский институт, общежитие и новая жизнь с выбором, который влияет на характеристики и отношения."

    k "Надо успеть заселиться, познакомиться с соседями и разобраться, где тут всё находится."

    # Пример взаимодействия с характеристиками и деньгами.
    $ katya_money -= 150
    $ relations["Марина"] += 2
    $ payment_text = "Катя заплатила за заселение в общежитие (осталось %d), а соседка Марина помогла разобраться с документами." % katya_money
    n payment_text

    # Пример выбора локации.
    $ location_list = ", ".join(known_locations)
    n "На карте доступны локации: [location_list]."
    menu:
        "Куда отправиться в первый день?":
            "Пройтись до института":
                $ current_location = "Институт"
                n "Катя осматривает главный корпус и узнаёт, где находится деканат. Знания +5."
                $ katya_stats["знания"] += 5
            "Познакомиться с соседями в общежитии":
                $ current_location = "Общежитие"
                n "Общение с соседями помогает расслабиться. Харизма +3, отношения с Мариной +1."
                $ katya_stats["харизма"] += 3
                $ relations["Марина"] += 1
            "Съездить в центр города":
                $ current_location = "Центр города"
                n "Шумные улицы, витрины и новый ритм. Энергия -10, но вдохновение +1 к харизме."
                $ katya_stats["энергия"] -= 10
                $ katya_stats["харизма"] += 1

    k "Нужно составить план: учеба, подработки, знакомства и отдых. У меня всё получится!"

    return
